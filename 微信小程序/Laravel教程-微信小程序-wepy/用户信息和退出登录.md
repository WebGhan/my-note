## 用户信息和退出登录
wxml 部分
```html
<template>
  <view>
    <!-- 已登录 -->
    <view wx:if="{{ user }}">
      <button type="warn" @tap="logout">退出登录</button>
    </view>
    <!-- 未登录 -->
    <navigator url="/pages/auth/login" wx:else>未登录</navigator>
  </view>
</template>
```
js 部分
```javascript
import wepy from 'wepy'
import api from '@/utils/api'

export default class User extends wepy.page {
  data = {
    // 用户信息
    user: null
  }
  async onShow() {
    // 每次打开页面，获取当前用户信息
    this.user = await this.$parent.getCurrentUser()
    this.$apply()
  }
  methods = {
    // 退出登录
    async logout (e) {
      try {
        // 调用退出登录接口
        let logoutResponse = await api.logout()

        // 退出成功，清除信息
        if (logoutResponse.statusCode === 204) {
          this.user = null
          this.$apply()
        }
      } catch (err) {
        console.log(err)
        wepy.showModal({
          title: '提示',
          content: '服务器错误，请联系管理员'
        })
      }
    }
  }
}
```