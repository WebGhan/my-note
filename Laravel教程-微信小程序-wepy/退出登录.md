## 退出登录
wxml 部分
```html
<template>
  <view wx:if="{{ loggedIn }}">
    已登录 name:{{ userInfo.name }}
    <button type="warn" @tap="logout">退出登录</button>
  </view>
  <view wx:else>
    <navigator url="/pages/auth/login">未登录</navigator>
  </view>
</template>
```
js 部分
```javascript
import wepy from 'wepy'
import api from '@/utils/api'

export default class User extends wepy.page {
  data = {
    // 标记是否登录
    loggedIn: false,
    // 用户信息
    userInfo: null
  }
  async onShow() {
    // 获取缓存中的 access_token
    let accessToken = wepy.getStorageSync('access_token')

    // 如果 access_token 存在，则说明已登录
    if (accessToken) {
      // 请求用户信息
      let userResponse = await api.authRequest('user')
      this.userInfo = userResponse.data
      this.loggedIn = true
      this.$apply()
    }
  }
  methods = {
    // 退出登录
    async logout (e) {
      try {
        // 调用退出登录接口
        let logoutResponse = await api.logout()

        // 退出成功，清除信息
        if (logoutResponse.statusCode === 204) {
          this.loggedIn = false
          this.userInfo = null
          this.$apply()
        }
      } catch (err) {
        console.log(err)
        wepy.showModal({
          title: '提示',
          content: '服务器错误，请联系管理员'
        })
      }
    }
  }
}
```