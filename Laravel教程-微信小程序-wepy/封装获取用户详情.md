## 获取用户详情
在 app.wpy 中全局定义
```javascript
.
.
.
import 'wepy-async-function'
import api from '@/utils/api'
.
.
.
// 检测用户是否已经登录
checkLogin() {
  return (wepy.getStorageSync('access_token') !== '')
}

// 获取当前登录用户信息
async getCurrentUser () {
  // 如果用户未登录
  if (!this.checkLogin()) {
    return null
  }

  // 从缓存中获取用户信息
  let user = wepy.getStorageSync('user')

  try {
    // 登录了但是缓存中没有，请求接口获取
    if (!user) {
      let userResponse = await api.authRequest('user')
      // 状态码为 200 表示请求成功
      if (userResponse.statusCode === 200) {
        user = userResponse.data
        wepy.setStorageSync('user', user)
      }
    }
  } catch (err) {
    console.log(err)
    wepy.showModal({
      title: '提示',
      content: '服务器错误，请联系管理员'
    })
  }

  return user
}
.
.
.
```